새 세션을 시작하며 이전 작업 상태를 복원합니다. 인자로 프로젝트명을 받습니다: $ARGUMENTS (예: util_dailycheckin, tving-newsletter 등. 없으면 현재 디렉토리 기준)

## 복원 우선순위

이 스킬은 **`/session-end`를 실행하지 않고 창을 닫아도** 작업을 복원합니다.

데이터 소스 우선순위:
1. **MEMORY.md** (항상 존재, 자동 로드됨) — "현재 진행 상황" 섹션에 다음 할 일이 있으면 최우선
2. **git log / git status** (항상 존재) — 커밋 이력, 미커밋 변경, 브랜치 상태
3. **Notion Session Log** (보충) — `/session-end` 실행 시에만 기록됨

## Notion 프로젝트 ID 매핑

| 프로젝트 | Notion Page ID |
|----------|---------------|
| util_dailycheckin | `****` |
| tving-newsletter | `****` |
| mealcouponfriend | `****` |
| budongsanxray1 | `****` |
| appstorereview | `****` |
| Opnion News Letter | `****` |
| tving-review-analysis | `****` |

## 수행 순서

### Step 1: 프로젝트 식별

1. `$ARGUMENTS`가 있으면 해당 프로젝트 사용
2. 없으면 현재 작업 디렉토리의 폴더명으로 프로젝트 판별
3. 위 매핑 테이블에서 Notion Page ID 확인

### Step 2: MEMORY.md에서 "현재 진행 상황" 확인 (최우선)

MEMORY.md는 시스템 프롬프트에 자동 로드되므로 이미 읽혀있음.
"현재 진행 상황" 섹션이 있는지 확인:
- **있으면**: 마지막 세션 날짜, 브랜치, 다음 할 일 추출 → 이것이 기본 브리핑
- **없으면**: Step 3의 git 기반 복원으로 대체

### Step 3: 로컬 Git 상태 확인 (항상 실행)

```bash
# 현재 브랜치
git branch --show-current

# 미커밋 변경사항
git status --short

# 미푸시 커밋
git log origin/$(git branch --show-current)..HEAD --oneline 2>/dev/null

# 최근 커밋 10개 (날짜 포함)
git log --oneline --format="%h %ad %s" --date=short -10
```

git 상태에서 파악할 수 있는 것:
- 마지막 커밋 날짜 → 마지막 작업일
- 브랜치명 → 어떤 기능 작업 중이었는지 (`feature/xxx`)
- 미커밋 파일 → 작업 진행 중이던 파일
- 최근 커밋 메시지 → 무엇을 했는지

### Step 4: Notion에서 보충 정보 (선택적)

Notion 접근이 가능하면, 프로젝트 페이지를 fetch → 서브페이지 ID 확인 → 아래 2개를 **병렬로** fetch:

1. **Session Log** — 가장 최근 세션 기록 읽기
   - "다음 할 일" 섹션이 있으면 추출
   - MEMORY.md에 이미 "다음 할 일"이 있으면 Notion은 참고용

2. **버전 히스토리** — 최근 업데이트 내역 읽기
   - 전체적인 프로젝트 진행 맥락 파악

**Notion 접근 실패 시**: 에러 무시하고 MEMORY.md + git만으로 브리핑 진행

### Step 5: 브리핑 출력

**경우 A: MEMORY.md에 "다음 할 일"이 있을 때 (/session-end 실행됨)**
```
📋 세션 브리핑 — [프로젝트명]
━━━━━━━━━━━━━━━━━━━━━━━━━━━

🕐 마지막 세션: YYYY-MM-DD
   [마지막 세션 주요 작업 요약 2-3줄]

🔀 Git 상태:
   - 브랜치: feature/xxx
   - 미커밋 변경: N개 파일
   - 미푸시 커밋: N개

📌 이전 세션에서 남긴 할 일:
   1. [TODO 항목 1]
   2. [TODO 항목 2]
   3. [TODO 항목 3]

💡 제안: [다음 할 일 중 우선순위 높은 것] 부터 시작할까요?
```

**경우 B: MEMORY.md에 "다음 할 일"이 없을 때 (창 그냥 닫힘)**
```
📋 세션 브리핑 — [프로젝트명]
━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚠️ 이전 세션이 정리 없이 종료됨 (git 기반 복원)

🕐 마지막 작업: YYYY-MM-DD (git log 기준)
   최근 커밋:
   - abc1234 커밋 메시지 1
   - def5678 커밋 메시지 2
   - ghi9012 커밋 메시지 3

🔀 Git 상태:
   - 브랜치: feature/xxx ← 이 기능 작업 중이었을 가능성
   - 미커밋 변경: N개 파일 ← 이 파일들을 수정 중이었음
   - 미푸시 커밋: N개

📌 추정 진행 상황:
   - 브랜치명과 최근 커밋으로 볼 때 [기능명] 작업 중이었음
   - 미커밋 파일: [파일 목록]

💡 무엇을 이어서 하시겠습니까?
```

### Step 6: 사용자 확인

AskUserQuestion으로 질문:
- 이전에 남긴 할 일 / 추정 작업을 이어서 할 것인지
- 다른 작업을 할 것인지
- 추가로 확인할 문서가 있는지

사용자 응답에 따라 작업 시작.

## 특수 케이스

### 첫 세션 (MEMORY.md에 진행 상황 없음 + git log 비어있음)
- "첫 세션입니다" 안내
- CLAUDE.md 기반으로 프로젝트 개요 브리핑
- 사용자에게 무엇을 할지 질문

### 여러 프로젝트 동시 작업 시
- `$ARGUMENTS`로 명시적 지정 권장
- 지정하지 않으면 현재 디렉토리 기준

## 규칙

- 브리핑은 간결하게 (스크롤 없이 한 화면에 보이도록)
- Notion은 읽기만 함 (쓰기 없음)
- Notion 실패해도 중단하지 않음 (MEMORY.md + git으로 대체)
- 개인정보 마스킹 규칙 준수 (앞2+뒤2)
- 한국어로 안내
